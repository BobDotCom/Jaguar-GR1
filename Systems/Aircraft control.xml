<?xml version="1.0"?>
<system name="Aircraft control">
  <property value="1">fcs/yaw-damper-enable</property>

  <channel name="Elevon">
   <summer name="fcs/pitch-sum">
      <input>fcs/elevator-cmd-norm</input>
      <input>fcs/pitch-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
   </summer>

   <aerosurface_scale name="fcs/pitch-pos-deg">
      <input>fcs/pitch-sum</input>
      <range>
        <min>  -25 </min>
        <max>   15 </max>
      </range>
   </aerosurface_scale>

   <summer name="fcs/roll-sum">
      <input>fcs/aileron-cmd-norm</input>
      <input>fcs/roll-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
   </summer>

   <aerosurface_scale name="fcs/roll-pos-deg">
      <input>fcs/roll-sum</input>
      <range>
        <min>  -12.5 </min>
        <max>   12.5 </max>
      </range>
   </aerosurface_scale>

  <fcs_function name="fcs/elevon-left-cmd">
      <function>
          <sum>
              <property>fcs/roll-pos-deg</property>
              <property>fcs/pitch-pos-deg</property>
          </sum>
      </function> 
        <clipto>
          <min> -25 </min>
          <max>  25 </max>       
        </clipto>
  </fcs_function>

        <lag_filter name="fcs/elevon-left-deg">
            <input>fcs/elevon-left-cmd</input>
            <c1>30</c1>
        </lag_filter>

  <fcs_function name="fcs/elevon-right-cmd">
      <function>
          <sum>
              <product>
                  <property>fcs/roll-pos-deg</property>
                  <value> -1 </value>
              </product>
              <property>fcs/pitch-pos-deg</property>
          </sum>
      </function> 
        <clipto>
          <min> -25 </min>
          <max>  25 </max>       
        </clipto>
  </fcs_function>

        <lag_filter name="fcs/elevon-right-deg">
            <input>fcs/elevon-right-cmd</input>
            <c1>30</c1>
        </lag_filter>

  </channel>


  <channel name="Yaw">
   <summer name="Rudder Command Sum">
      <input>fcs/rudder-cmd-norm</input>
      <input>fcs/yaw-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
   </summer>

   <scheduled_gain name="Yaw Damper Rate">
      <input>velocities/r-aero-rad_sec</input>
      <table>
        <independentVar lookup="row">velocities/ve-kts</independentVar>
         <tableData>
            30     0.00
            60     2.00
         </tableData>
      </table>
      <gain>fcs/yaw-damper-enable</gain>
   </scheduled_gain>

   <summer name="Rudder Sum">
      <input>fcs/rudder-command-sum</input>
      <input>fcs/yaw-damper-rate</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
   </summer>

    <lag_filter name="fcs/rudder-speed">
      <input>fcs/rudder-sum</input>
        <c1>20</c1>
    </lag_filter>

   <aerosurface_scale name="Rudder Control">
      <input>fcs/rudder-speed</input>
      <domain>
        <min> -1 </min>
        <max>  1 </max>
      </domain>
      <range>
        <min> -0.35 </min>
        <max>  0.35 </max>
      </range>
      <output>fcs/rudder-pos-rad</output>
   </aerosurface_scale>

   <aerosurface_scale name="Rudder Normalization">
      <input>fcs/rudder-pos-rad</input>
      <domain>
        <min> -0.35 </min>
        <max>  0.35 </max>
      </domain>
      <range>
        <min> -1 </min>
        <max>  1 </max>
      </range>
      <output>fcs/rudder-pos-norm</output>
   </aerosurface_scale>
  </channel>



</system>
